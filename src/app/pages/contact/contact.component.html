<div class="contact-container">
    <h2 class="page-title mat-headline-large">Contact</h2>

    <div class="contact-links">
        <a href="https://www.linkedin.com/in/william-k-applegate/" target="_blank" rel="noopener">
            <button mat-stroked-button>
                <i class="fab fa-linkedin fa-xl"></i> LinkedIn
            </button>
        </a>

        <a href="https://github.com/wikapple" target="_blank" rel="noopener">
            <button mat-stroked-button>
                <i class="fab fa-github fa-xl"></i> GitHub
            </button>
        </a>
    </div>
    <div class="contact-form-container">
        <h1>Let’s Get in Touch</h1>
        @if (!submittedSuccessfully) {
        <p>You can reach me via the form below, or at <a href="mailto:wikapple@gmail.com"
                aria-label="Email"><strong>wikapple&#64;gmail.com</strong></a>.</p>

        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
            <fieldset [disabled]="submittingForm">
                <mat-form-field appearance="outline">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" required maxlength="200" />
                    <mat-error *ngIf="contactForm.get('name')?.hasError('maxlength')">
                        Name is too long.
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" required type="email" maxlength="254" />
                    <mat-error *ngIf="contactForm.get('email')?.hasError('maxlength')">
                        Email is too long.
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Message</mat-label>
                    <textarea matInput formControlName="message" rows="5" required maxlength="3000"></textarea>
                     <mat-hint align="end">{{ contactForm.get('message')?.value?.length || 0 }} / 3000</mat-hint>
                    <mat-error *ngIf="contactForm.get('message')?.hasError('maxlength')">
                        Message is too long.
                    </mat-error>
                </mat-form-field>

                <button mat-flat-button color="primary" type="submit" [disabled]="!contactForm.valid || submittingForm">
                    <ng-container *ngIf="!submittingForm">Send Message</ng-container>
                    <mat-progress-spinner *ngIf="submittingForm" diameter="20" mode="indeterminate" color="accent">
                    </mat-progress-spinner>
                </button>
            </fieldset>
        </form>
        }
        @else {
        <div class="thank-you-message"><i class="fa-solid fa-square-check"></i>
            <p>
                Your message was sent successfully. Thank you for reaching out! I’ll be in touch as soon as possible.
            </p>
        </div>
        }

    </div>
</div>